# 業務フロー詳細

本ドキュメントは、人事考課システムの業務フローをロール別・時系列で詳細に定義します。

---

## 1. 年間スケジュール

### 1.1 評価サイクルカレンダー（2025年度例）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  2024年                           2025年                                    │
│  10月    11月    12月    1月    2月    3月    ...    9月                    │
├─────────────────────────────────────────────────────────────────────────────┤
│  ├──評価期間開始──────────────────────────────────────────評価期間終了─┤    │
│                                                                             │
│  10/1   10/15   11/15   12/15   12/20   12/25        9/30                  │
│   │      │       │       │       │       │            │                    │
│   │      │       │       │       │       │            └─ 期間終了          │
│   │      │       │       │       │       └─ 評価確定・給与反映             │
│   │      │       │       │       └─ HR最終承認                             │
│   │      │       │       └─ 上司承認期限                                   │
│   │      │       └─ 同僚評価期限・上司評価期限                             │
│   │      └─ 自己評価期限                                                   │
│   └─ 評価開始・自己評価入力開始                                            │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 1.2 主要マイルストーン

| 日付     | マイルストーン     | 関係者 | システムアクション         |
| -------- | ------------------ | ------ | -------------------------- |
| 10月1日  | 評価期間開始       | HR     | 評価期間ステータス→ACTIVE  |
| 10月1日  | 自己評価入力開始   | 全社員 | 評価サイクル作成、通知送信 |
| 10月15日 | 自己評価期限       | 全社員 | リマインド通知             |
| 11月1日  | 同僚評価開始       | 全社員 | 同僚評価依頼通知           |
| 11月15日 | 同僚評価期限       | 全社員 | リマインド通知             |
| 11月15日 | 上司評価開始       | 上司   | 上司評価依頼通知           |
| 12月15日 | 上司評価・承認期限 | 上司   | リマインド通知             |
| 12月20日 | HR承認期限         | HR     | リマインド通知             |
| 12月25日 | 評価確定           | HR     | 給与テーブル更新           |

---

## 2. ロール別業務フロー

### 2.1 一般社員の業務フロー

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        一般社員の評価期間中フロー                            │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  【10月】自己評価フェーズ                                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 1. ダッシュボードで「自己評価入力」タスクを確認                       │   │
│  │    └─ 画面: SC02（ダッシュボード）                                   │   │
│  │                                                                       │   │
│  │ 2. スキルマップで現在の達成状況を確認                                 │   │
│  │    └─ 画面: SC06（スキルマップ）                                     │   │
│  │                                                                       │   │
│  │ 3. 自己評価を入力                                                     │   │
│  │    └─ 画面: SC04（自己評価入力）                                     │   │
│  │    └─ 各ロードマップ項目に対してスコア(1-5)とエビデンスを入力        │   │
│  │                                                                       │   │
│  │ 4. 自己評価を提出                                                     │   │
│  │    └─ API: POST /cycles/{id}/self-evaluation/submit                  │   │
│  │    └─ 状態: DRAFT → SELF_SUBMITTED                                   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  【11月】同僚評価フェーズ                                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 5. 同僚評価依頼の通知を受信                                           │   │
│  │    └─ 通知: PEER_EVALUATION_REQUEST                                  │   │
│  │                                                                       │   │
│  │ 6. 指定された同僚の評価を入力                                         │   │
│  │    └─ 画面: SC05（同僚評価入力）                                     │   │
│  │    └─ 対象: ロードマップNo.74-82（行動・貢献）                       │   │
│  │                                                                       │   │
│  │ 7. 同僚評価を提出                                                     │   │
│  │    └─ API: POST /cycles/{id}/peer-evaluations/submit                 │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  【12月】結果確認フェーズ                                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 8. 評価確定通知を受信                                                 │   │
│  │    └─ 通知: EVALUATION_FINALIZED                                     │   │
│  │                                                                       │   │
│  │ 9. 評価結果を確認                                                     │   │
│  │    └─ 画面: SC08（評価結果確認）                                     │   │
│  │    └─ 内容: 最終スコア、ランク、号俸アップ数、フィードバック          │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### 一般社員の業務イベント一覧

| #   | 業務イベント | トリガー         | 画面 | API                                      | 後続処理           |
| --- | ------------ | ---------------- | ---- | ---------------------------------------- | ------------------ |
| 1   | タスク確認   | 評価期間開始通知 | SC02 | GET /dashboard                           | -                  |
| 2   | スキル確認   | 本人操作         | SC06 | GET /skill-map                           | -                  |
| 3   | 自己評価入力 | 本人操作         | SC04 | PUT /self-evaluations/{id}               | 自動保存           |
| 4   | 自己評価提出 | 本人操作         | SC04 | POST /cycles/{id}/self-evaluation/submit | 上司・同僚に通知   |
| 5   | 同僚評価入力 | 同僚評価依頼通知 | SC05 | PUT /peer-evaluations/{id}               | 自動保存           |
| 6   | 同僚評価提出 | 本人操作         | SC05 | POST /peer-evaluations/{id}/submit       | システムが完了判定 |
| 7   | 結果確認     | 評価確定通知     | SC08 | GET /cycles/{id}/result                  | -                  |

---

### 2.2 上司の業務フロー

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           上司の評価期間中フロー                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  【10月-11月】モニタリングフェーズ                                          │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 1. 部下一覧で評価進捗を確認                                           │   │
│  │    └─ 画面: SC09（部下一覧）                                         │   │
│  │    └─ 確認: 自己評価提出状況、同僚評価進捗                           │   │
│  │                                                                       │   │
│  │ 2. 部下のスキル達成状況を確認                                         │   │
│  │    └─ 画面: SC20（部下スキル確認）                                   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  【11月】上司評価フェーズ                                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 3. 上司評価依頼の通知を受信                                           │   │
│  │    └─ 通知: MANAGER_EVALUATION_REQUEST                               │   │
│  │    └─ トリガー: 同僚評価完了（PEER_COMPLETED）                       │   │
│  │                                                                       │   │
│  │ 4. 部下の自己評価・同僚評価を確認                                     │   │
│  │    └─ 画面: SC10（上司評価入力）                                     │   │
│  │                                                                       │   │
│  │ 5. 上司評価を入力                                                     │   │
│  │    └─ 画面: SC10（上司評価入力）                                     │   │
│  │    └─ 内容:                                                          │   │
│  │        - スキル習得度（/50点）                                        │   │
│  │        - 職能発揮力（/30点）                                          │   │
│  │        - 行動・貢献（/20点）                                          │   │
│  │        - 総合コメント                                                 │   │
│  │                                                                       │   │
│  │ 6. 上司評価を提出                                                     │   │
│  │    └─ API: POST /cycles/{id}/manager-evaluation/submit               │   │
│  │    └─ 状態: PEER_COMPLETED → MANAGER_SUBMITTED                       │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  【12月】承認フェーズ                                                       │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 7. 評価内容を最終確認                                                 │   │
│  │    └─ 画面: SC11（評価承認）                                         │   │
│  │                                                                       │   │
│  │ 8-A. 承認する場合                                                     │   │
│  │    └─ API: POST /cycles/{id}/approve (action=APPROVE)                │   │
│  │    └─ 状態: MANAGER_SUBMITTED → MANAGER_APPROVED                     │   │
│  │    └─ 後続: HRに承認依頼                                             │   │
│  │                                                                       │   │
│  │ 8-B. 差戻しする場合                                                   │   │
│  │    └─ API: POST /cycles/{id}/reject                                  │   │
│  │    └─ 状態: MANAGER_SUBMITTED → REJECTED                             │   │
│  │    └─ 後続: 本人に差戻し通知                                         │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### 上司の業務イベント一覧

| #   | 業務イベント | トリガー         | 画面 | API                                         | 後続処理       |
| --- | ------------ | ---------------- | ---- | ------------------------------------------- | -------------- |
| 1   | 進捗確認     | 定期確認         | SC09 | GET /subordinates                           | -              |
| 2   | スキル確認   | 本人操作         | SC20 | GET /subordinates/{id}/skills               | -              |
| 3   | 上司評価開始 | 同僚評価完了通知 | SC10 | GET /cycles/{id}                            | -              |
| 4   | 上司評価入力 | 本人操作         | SC10 | PUT /manager-evaluations/{id}               | 自動保存       |
| 5   | 上司評価提出 | 本人操作         | SC10 | POST /cycles/{id}/manager-evaluation/submit | ステータス更新 |
| 6   | 評価承認     | 本人操作         | SC11 | POST /cycles/{id}/approve                   | HRに通知       |
| 7   | 評価差戻し   | 本人操作         | SC11 | POST /cycles/{id}/reject                    | 本人に通知     |

---

### 2.3 HR担当の業務フロー

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          HR担当の評価期間中フロー                            │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  【評価期間開始前】準備フェーズ                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 1. 評価期間を作成・設定                                               │   │
│  │    └─ 画面: SC13（評価期間管理）                                     │   │
│  │    └─ 設定: 開始日、終了日、評価月                                   │   │
│  │                                                                       │   │
│  │ 2. 評価基準を確認・更新                                               │   │
│  │    └─ 画面: SC15（評価基準管理）                                     │   │
│  │    └─ 確認: 評価軸、配点、ロードマップ範囲                           │   │
│  │                                                                       │   │
│  │ 3. 評価期間をアクティベート                                           │   │
│  │    └─ API: POST /periods/{id}/activate                               │   │
│  │    └─ 後続: 全社員に評価サイクル作成、通知送信                       │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  【評価期間中】モニタリングフェーズ                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 4. 全体進捗を確認                                                     │   │
│  │    └─ 画面: SC12（管理ダッシュボード）                               │   │
│  │    └─ 確認: 部門別進捗、遅延者リスト                                 │   │
│  │                                                                       │   │
│  │ 5. 必要に応じてリマインド送信                                         │   │
│  │    └─ 画面: SC12                                                     │   │
│  │    └─ API: POST /notifications/bulk                                  │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  【12月】最終承認フェーズ                                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 6. HR承認依頼の通知を受信                                             │   │
│  │    └─ 通知: HR_APPROVAL_REQUEST                                      │   │
│  │    └─ トリガー: 上司承認完了（MANAGER_APPROVED）                     │   │
│  │                                                                       │   │
│  │ 7. 評価内容を確認                                                     │   │
│  │    └─ 画面: SC16（HR承認）                                           │   │
│  │    └─ 確認: スコア、ランク、コメント、整合性                         │   │
│  │                                                                       │   │
│  │ 8-A. 承認する場合                                                     │   │
│  │    └─ API: POST /cycles/{id}/hr-approve                              │   │
│  │    └─ 状態: MANAGER_APPROVED → HR_APPROVED                           │   │
│  │                                                                       │   │
│  │ 8-B. 差戻しする場合                                                   │   │
│  │    └─ API: POST /cycles/{id}/hr-reject                               │   │
│  │    └─ 状態: MANAGER_APPROVED → REJECTED                              │   │
│  │    └─ 後続: 上司に差戻し通知                                         │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  【12月下旬】確定フェーズ                                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 9. 全評価を確定                                                       │   │
│  │    └─ 画面: SC16（HR承認）                                           │   │
│  │    └─ API: POST /periods/{id}/finalize                               │   │
│  │    └─ 後続:                                                          │   │
│  │        - 全サイクル: HR_APPROVED → FINALIZED                          │   │
│  │        - 号俸テーブル更新                                             │   │
│  │        - 全社員に結果通知                                             │   │
│  │                                                                       │   │
│  │ 10. レポート出力                                                      │   │
│  │    └─ 画面: SC18（レポート）                                         │   │
│  │    └─ 内容: 部門別評価分布、昇格候補者リスト                         │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### HR担当の業務イベント一覧

| #   | 業務イベント       | トリガー     | 画面 | API                          | 後続処理             |
| --- | ------------------ | ------------ | ---- | ---------------------------- | -------------------- |
| 1   | 評価期間作成       | 年次業務     | SC13 | POST /periods                | -                    |
| 2   | 評価基準確認       | 期間作成後   | SC15 | GET /criteria                | -                    |
| 3   | 期間アクティベート | HR操作       | SC13 | POST /periods/{id}/activate  | 全社員に通知         |
| 4   | 進捗確認           | 定期確認     | SC12 | GET /admin/dashboard         | -                    |
| 5   | リマインド送信     | HR操作       | SC12 | POST /notifications/bulk     | 対象者に通知         |
| 6   | HR承認             | 上司承認通知 | SC16 | POST /cycles/{id}/hr-approve | 確定待ち             |
| 7   | HR差戻し           | HR操作       | SC16 | POST /cycles/{id}/hr-reject  | 上司に通知           |
| 8   | 全評価確定         | HR操作       | SC16 | POST /periods/{id}/finalize  | 給与反映、全社員通知 |
| 9   | レポート出力       | HR操作       | SC18 | GET /reports                 | -                    |

---

## 3. 差戻しフロー詳細

### 3.1 差戻しパターン

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           差戻しフローパターン                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  パターン1: 上司による差戻し（MANAGER_SUBMITTED時点）                       │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ MANAGER_SUBMITTED → REJECTED → 本人修正 → DRAFT → 再提出           │   │
│  │                                                                       │   │
│  │ 1. 上司が差戻しを実行（コメント必須）                                 │   │
│  │ 2. 本人に差戻し通知（EVALUATION_REJECTED）                           │   │
│  │ 3. 本人が自己評価を修正                                               │   │
│  │ 4. 本人が再提出 → SELF_SUBMITTED                                     │   │
│  │ 5. 同僚評価はスキップ（既に完了）→ 上司評価へ                        │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  パターン2: HRによる差戻し（MANAGER_APPROVED時点）                          │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ MANAGER_APPROVED → REJECTED → 上司修正 → MANAGER_SUBMITTED          │   │
│  │                                                                       │   │
│  │ 1. HRが差戻しを実行（コメント必須）                                   │   │
│  │ 2. 上司に差戻し通知（EVALUATION_REJECTED_BY_HR）                     │   │
│  │ 3. 上司が評価を修正                                                   │   │
│  │ 4. 上司が再提出 → MANAGER_SUBMITTED                                  │   │
│  │ 5. 上司が再承認 → MANAGER_APPROVED                                   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 差戻し理由の例

| 差戻し元 | 差戻し先 | 典型的な理由                                               |
| -------- | -------- | ---------------------------------------------------------- |
| 上司     | 本人     | エビデンス不足、スコアと実績の乖離、コメント不備           |
| HR       | 上司     | 部門間の評価バランス調整、昇格要件との不整合、コメント不足 |

---

## 4. カリキュラム作成フロー

### 4.1 シナリオ作成〜配信フロー

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                       カリキュラム作成業務フロー                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  【フェーズ1】シナリオ作成（HR担当）                                        │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 1. 文章題管理画面を開く                                               │   │
│  │    └─ 画面: SC22（文章題管理）                                       │   │
│  │                                                                       │   │
│  │ 2. AIと対話してシナリオを作成                                         │   │
│  │    └─ API: POST /scenarios/generate-draft                            │   │
│  │    └─ 入力: スキルカテゴリ、対象職級、難易度                         │   │
│  │    └─ 出力: シナリオ下書き                                           │   │
│  │                                                                       │   │
│  │ 3. シナリオを保存                                                     │   │
│  │    └─ API: POST /scenarios                                           │   │
│  │    └─ 状態: DRAFT                                                    │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  【フェーズ2】カリキュラム生成（システム）                                  │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 4. カリキュラム生成を実行                                             │   │
│  │    └─ API: POST /scenarios/{id}/generate-curriculum                  │   │
│  │    └─ 処理:                                                          │   │
│  │        - シナリオ + ロードマップ + 対象職級から                       │   │
│  │        - LLMでカリキュラム（Book）を生成                              │   │
│  │    └─ 状態: DRAFT → GENERATED                                        │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  【フェーズ3】有識者査閲（有識者）                                          │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 5. 有識者に査閲依頼通知                                               │   │
│  │    └─ 通知: CURRICULUM_REVIEW_REQUEST                                │   │
│  │                                                                       │   │
│  │ 6. カリキュラム内容を確認                                             │   │
│  │    └─ 確認ポイント:                                                  │   │
│  │        - 技術的正確性                                                 │   │
│  │        - 教育的ノイズの適切性                                         │   │
│  │        - 対象職級との適合性                                           │   │
│  │                                                                       │   │
│  │ 7-A. 承認する場合                                                     │   │
│  │    └─ API: POST /scenarios/{id}/approve                              │   │
│  │    └─ 状態: GENERATED → REVIEWED                                     │   │
│  │                                                                       │   │
│  │ 7-B. 修正依頼する場合                                                 │   │
│  │    └─ API: POST /scenarios/{id}/request-revision                     │   │
│  │    └─ 状態: GENERATED → DRAFT                                        │   │
│  │    └─ 後続: HR担当に通知                                             │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  【フェーズ4】配信（システム/HR担当）                                       │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ 8. 対象社員を選択して割り当て                                         │   │
│  │    └─ API: POST /curriculum-assignments                              │   │
│  │    └─ 入力: 社員ID、シナリオID、期限                                 │   │
│  │                                                                       │   │
│  │ 9. 社員に通知                                                         │   │
│  │    └─ 通知: CURRICULUM_ASSIGNED                                      │   │
│  │    └─ 状態: REVIEWED → PUBLISHED                                     │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 5. 通知一覧

### 5.1 評価サイクル関連通知

| 通知タイプ                    | 送信先 | トリガー       | 内容                     |
| ----------------------------- | ------ | -------------- | ------------------------ |
| `SELF_EVALUATION_START`       | 本人   | 評価期間開始   | 自己評価入力の開始依頼   |
| `SELF_EVALUATION_REMINDER`    | 本人   | 期限3日前      | 自己評価提出のリマインド |
| `PEER_EVALUATION_REQUEST`     | 同僚   | 自己評価提出後 | 同僚評価の依頼           |
| `PEER_EVALUATION_REMINDER`    | 同僚   | 期限3日前      | 同僚評価提出のリマインド |
| `MANAGER_EVALUATION_REQUEST`  | 上司   | 同僚評価完了後 | 上司評価の依頼           |
| `MANAGER_EVALUATION_REMINDER` | 上司   | 期限3日前      | 上司評価提出のリマインド |
| `HR_APPROVAL_REQUEST`         | HR     | 上司承認後     | HR承認の依頼             |
| `EVALUATION_REJECTED`         | 本人   | 上司差戻し     | 差戻し通知とコメント     |
| `EVALUATION_REJECTED_BY_HR`   | 上司   | HR差戻し       | 差戻し通知とコメント     |
| `EVALUATION_FINALIZED`        | 本人   | 評価確定後     | 評価結果の確定通知       |

### 5.2 カリキュラム関連通知

| 通知タイプ                  | 送信先     | トリガー           | 内容                 |
| --------------------------- | ---------- | ------------------ | -------------------- |
| `CURRICULUM_REVIEW_REQUEST` | 有識者     | カリキュラム生成後 | 査閲依頼             |
| `CURRICULUM_ASSIGNED`       | 本人       | 割り当て後         | 新しい学習課題の通知 |
| `CURRICULUM_DEADLINE_NEAR`  | 本人       | 期限7日前          | 期限リマインド       |
| `CURRICULUM_OVERDUE`        | 本人, 上司 | 期限超過           | 未完了アラート       |
| `CURRICULUM_COMPLETED`      | 上司       | 学習完了後         | 完了報告             |

---

_トキワテック人事考課システム 2026年度版_

# EXERCISE（演習コンテンツ）テンプレート

## 概要

EXERCISEはハンズオン形式の演習コンテンツです。
実際にコードを書いて、スキルを定着させることを目的とします。

---

## メタ情報

```yaml
itemType: EXERCISE
estimatedMinutes: 15-30  # 標準は20分
taskCount: 2-4  # タスク数
submissionType: PR | COMMIT | MANUAL
```

---

## 必須フィールド

```typescript
interface ExerciseItem {
  // 基本情報
  id: string;
  itemNumber: number;
  itemType: 'EXERCISE';
  title: string;
  stepTitle: string;      // 命令形（例：「脆弱なコードを特定せよ」）
  stepContext: string;    // シナリオの状況説明
  estimatedMinutes: number;

  // コンテンツ
  content: string;        // Markdown形式の本文

  // GitHub連携
  githubRepo: string;     // 例：'org/repo-name'
  branch: string;         // 例：'exercise/step-4'
  setupCommands: string[];

  // 評価
  objectives: string[];   // 達成目標（3-5個）
  hints?: string[];       // ヒント（2-4個）
}
```

---

## 構成パターン

### パターンA: 基礎演習（Step 4用）

学んだ内容を実践する初級レベルの演習。

```markdown
## 演習: [演習タイトル]

[演習の目的と概要（2-3文）]

---

## シナリオ

[学習者が置かれる状況の説明（ストーリー性を持たせる）]

> 「[具体的な依頼や指示を引用形式で]」
> — [依頼者の役職・名前]

---

## リポジトリ情報

| 項目 | 値 |
|------|-----|
| リポジトリ | `organization/repo-name` |
| ブランチ | `exercise/step-N` |
| 対象ファイル | `src/xxx.ts`, `src/yyy.ts` |

---

## タスク

### タスク1: [タスク名]

[具体的な指示（何をするか明確に）]

**確認ポイント：**
- [ ] チェック項目1
- [ ] チェック項目2
- [ ] チェック項目3

### タスク2: [タスク名]

[具体的な指示]

**確認ポイント：**
- [ ] チェック項目1
- [ ] チェック項目2

### タスク3: 動作確認

修正が正しいことを確認するため、テストを実行してください：

\`\`\`bash
npm run test
\`\`\`

すべてのテストがパスすれば完了です。

---

## 評価基準

| 基準 | 達成条件 |
|------|----------|
| タスク1 | [具体的な条件] |
| タスク2 | [具体的な条件] |
| テスト | `npm run test` がすべてパス |
```

---

### パターンB: 実践演習（Step 6用）

実務に近い複雑なシナリオでの応用演習。

```markdown
## 実践演習: [演習タイトル]

[演習の目的と難易度（2-3文）]

---

## シナリオ

[より複雑な業務シナリオの説明]

> 「[依頼内容]
>
> 特に以下の点に注意してください：
> 1. [注意点1]
> 2. [注意点2]
> 3. [注意点3]
>
> テストカバレッジは維持してください。」
> — [依頼者]

---

## 背景情報

### システム構成

\`\`\`
[システム構成図（アスキーアート）]
\`\`\`

### 現状の問題点

1. **問題1**: [説明]
2. **問題2**: [説明]
3. **問題3**: [説明]

---

## タスク

### タスク1: [タスク名]

[具体的な指示]

\`\`\`typescript
// 修正前のコード例（問題点を示す）
[コード]
\`\`\`

**確認ポイント：**
- [ ] チェック項目1
- [ ] チェック項目2

### タスク2: [タスク名]

[具体的な指示]

**確認ポイント：**
- [ ] チェック項目1
- [ ] チェック項目2

### タスク3: [タスク名]

[具体的な指示]

---

## 評価基準

| 基準 | 達成条件 | 配点 |
|------|----------|------|
| 機能要件 | [条件] | 40% |
| コード品質 | [条件] | 30% |
| テスト | [条件] | 20% |
| ドキュメント | [条件] | 10% |

---

## 発展課題（任意）

時間に余裕がある場合、以下にも挑戦してみてください：

- [ ] [発展課題1]
- [ ] [発展課題2]
```

---

## GitHub連携の設定

### setupCommands の例

```yaml
# 基本的なNode.jsプロジェクト
setupCommands:
  - npm install
  - npm run test:watch

# データベースを使用するプロジェクト
setupCommands:
  - npm install
  - npm run db:setup
  - npm run test:watch

# Dockerを使用するプロジェクト
setupCommands:
  - npm install
  - docker-compose up -d
  - npm run migrate
  - npm run test
```

### branch命名規則

```
exercise/step-{N}         # 基本形
exercise/step-{N}-{topic} # トピック付き
solution/step-{N}         # 解答ブランチ
```

---

## objectives（達成目標）の書き方

### 良い例

```yaml
objectives:
  - "users.ts の脆弱なクエリを3箇所特定する"
  - "products.ts をプリペアドステートメントで修正する"
  - "すべてのテストがパスすることを確認する"
```

### 悪い例

```yaml
objectives:
  - "コードを理解する"          # ❌ 曖昧
  - "セキュリティを向上させる"   # ❌ 測定不可能
  - "勉強する"                  # ❌ 具体性なし
```

### ルール

1. **具体的**: 何を、どこで、いくつ
2. **測定可能**: 完了条件が明確
3. **行動ベース**: 動詞で始める（特定する、修正する、確認する）

---

## hints（ヒント）の書き方

### 段階的ヒント

```yaml
hints:
  - "テンプレートリテラル（`）での文字列埋め込みを探してください"  # レベル1: 方向性
  - "db.query() の第2引数にパラメータ配列を渡せます"            # レベル2: 具体的な方法
  - "LIKE句のワイルドカード（%）はパラメータ側で付与します"     # レベル3: 詳細なテクニック
```

### ルール

1. 最初は方向性のみ、徐々に具体的に
2. 答えそのものは書かない
3. 2-4個程度に絞る

---

## ノイズレベル別の調整

### MINIMAL（L1向け）

- ステップバイステップの詳細な指示
- コード例を多く提示
- エラーが出にくい環境
- ヒントは最初から表示

### LOW（L1→L2）

- 一部の手順を省略
- 「調べてみましょう」を追加
- 軽微なエラーへの対処が必要

### MEDIUM（L2→L3）

- 複数のアプローチが可能
- レガシーコードへの対応
- ドキュメントと実装の乖離

### HIGH（L3→L4）

- 要件が曖昧
- トレードオフの判断が必要
- 自分で調査が必要

### MAXIMUM（L4→L5）

- 矛盾する要件
- 正解が複数存在
- ステークホルダーとの調整が必要

---

## AI生成プロンプト

```
以下の仕様でEXERCISEコンテンツを生成してください：

【基本情報】
- タイトル: {title}
- stepTitle: {stepTitle}（命令形）
- stepContext: {context}
- パターン: {A|B}（基礎演習|実践演習）
- 想定時間: {minutes}分
- ノイズレベル: {noiseLevel}

【GitHub情報】
- リポジトリ: {githubRepo}
- ブランチ: {branch}
- 対象ファイル: {targetFiles}

【タスク要件】
- タスク数: {taskCount}個
- 各タスクに確認ポイントを含める
- 最終タスクはテスト実行

【達成目標】
- 目標数: 3-5個
- 具体的・測定可能・行動ベースで記述

【ヒント】
- ヒント数: 2-4個
- 段階的に具体化

【出力形式】
Markdown形式で出力
```

# チェックポイント：EC2/S3/RDSを構築しよう

## メタ情報

```yaml
mission: "クラウドの頂を制覇しよう"
step: 2
subStep: 6
title: "チェックポイント"
itemType: QUIZ
estimatedMinutes: 30
noiseLevel: MINIMAL
roadmap:
  skill: "AWS"
  category: "クラウド"
  target_level: "L1"
passingScore: 80
```

---

## クイズの説明

Step 2 で学んだ EC2/S3/RDS の構築に関する理解度をチェックします。

- 全8問
- 合格ライン: 80%（7問正解）

---

## 問題

### Q1. EC2 インスタンスを起動する際に、起動時にスクリプトを自動実行するための機能はどれですか？

- A) タグ
- B) ユーザーデータ
- C) メタデータ
- D) ロールデータ

<details>
<summary>解答と解説</summary>

**正解: B**

ユーザーデータ（User Data）は、EC2 インスタンスの起動時に自動実行されるスクリプトを指定する機能です。パッケージのインストール、サービスの起動、設定ファイルの配置などの初期設定を自動化できます。

</details>

---

### Q2. セキュリティグループの特徴として正しいものはどれですか？

- A) ステートレスである
- B) 許可ルールと拒否ルールの両方を設定できる
- C) サブネット単位で適用される
- D) ステートフルであり、許可ルールのみ設定できる

<details>
<summary>解答と解説</summary>

**正解: D**

セキュリティグループはステートフルなファイアウォールであり、許可したインバウンドトラフィックに対する応答は自動的に許可されます。設定できるのは許可ルールのみで、拒否ルールは設定できません。ルールに一致しないトラフィックは暗黙的に拒否されます。ステートレスでサブネット単位に適用されるのはネットワーク ACL です。

</details>

---

### Q3. S3 バケットのバージョニングを有効にした場合、オブジェクトを「削除」するとどうなりますか？

- A) オブジェクトが完全に削除される
- B) 削除マーカーが追加され、以前のバージョンは保持される
- C) 最新バージョンのみ削除され、1つ前のバージョンが表示される
- D) バージョニングが自動的に無効になる

<details>
<summary>解答と解説</summary>

**正解: B**

バージョニングが有効な S3 バケットでオブジェクトを削除すると、実際には削除マーカーが追加されるだけで、以前のバージョンは全て保持されます。削除マーカーを取り除くことで、オブジェクトを復元できます。完全に削除するには、特定のバージョン ID を指定して削除する必要があります。

</details>

---

### Q4. EBS ボリュームタイプのうち、一般的な Web アプリケーションに最も適しているのはどれですか？

- A) io2（プロビジョンドIOPS SSD）
- B) gp3（汎用SSD）
- C) st1（スループット最適化HDD）
- D) sc1（コールドHDD）

<details>
<summary>解答と解説</summary>

**正解: B**

gp3（汎用SSD第3世代）は、コストパフォーマンスに優れた汎用的な SSD ボリュームで、一般的な Web アプリケーションに最適です。ベースラインで 3,000 IOPS を提供し、追加料金で最大 16,000 IOPS まで増加可能です。io2 は高性能 DB など特殊な用途向けで高コストです。

</details>

---

### Q5. RDS のポイントインタイムリカバリについて正しい説明はどれですか？

- A) 既存のインスタンスを指定した時刻の状態に巻き戻す
- B) 指定した時刻の状態の新しいインスタンスを作成する
- C) 最後のスナップショット時点にのみ復元可能
- D) マルチAZ 配置でのみ利用可能

<details>
<summary>解答と解説</summary>

**正解: B**

ポイントインタイムリカバリは、指定した秒まで の状態の**新しい** RDS インスタンスを作成します。既存のインスタンスを上書きするのではありません。自動バックアップの保持期間内（最大35日間）の任意の時点に復元可能です。マルチAZ 配置に関わらず、自動バックアップが有効であれば利用できます。

</details>

---

### Q6. ALB（Application Load Balancer）のヘルスチェックが失敗した場合の動作として正しいものはどれですか？

- A) ALB 自体が停止する
- B) 異常なターゲットへのトラフィック送信を停止し、正常なターゲットにのみ振り分ける
- C) 全てのターゲットへのトラフィックを停止する
- D) 異常なターゲットを自動的に再起動する

<details>
<summary>解答と解説</summary>

**正解: B**

ALB はヘルスチェックに失敗したターゲット（EC2 インスタンス等）へのトラフィック送信を停止し、正常なターゲットにのみリクエストを振り分けます。ALB 自体は停止しませんし、異常なターゲットの再起動は行いません。Auto Scaling と組み合わせることで、異常なインスタンスの置き換えを自動化できます。

</details>

---

### Q7. S3 のライフサイクルポリシーで実現できないことはどれですか？

- A) 30日後に Standard-IA に移行する
- B) 90日後に Glacier に移行する
- C) 365日後にオブジェクトを自動削除する
- D) リアルタイムでアクセス頻度に応じてストレージクラスを変更する

<details>
<summary>解答と解説</summary>

**正解: D**

ライフサイクルポリシーは日数ベースの移行・削除ルールを設定するもので、リアルタイムのアクセス頻度に基づく動的な変更はできません。リアルタイムのアクセスパターンに基づいた自動移行には、S3 Intelligent-Tiering ストレージクラスを使用します。

</details>

---

### Q8. Elastic IP について正しい説明はどれですか？

- A) EC2 に無料で無制限に割り当てられる
- B) EC2 を停止・起動してもIPアドレスが変わらない
- C) リージョンをまたいで使用できる
- D) 自動的にEC2に割り当てられる

<details>
<summary>解答と解説</summary>

**正解: B**

Elastic IP は固定のパブリック IP アドレスで、EC2 に関連付けることで停止・起動しても IP が変わりません。ただし、使用していない Elastic IP には料金が発生します。リージョンをまたいでの使用はできず、自動割り当てではなく手動での割り当てが必要です。

</details>

---

## 結果

### 7問以上正解の場合

**合格です。おめでとうございます。**

Step 2「EC2/S3/RDSを構築しよう」を完了しました。
次は Step 3「IAMでセキュリティを固めよう」に進みましょう。

### 6問以下の場合

**もう少し復習しましょう。**

| 問題 | 復習セクション |
|------|---------------|
| Q1 | step2_1 EC2インスタンスの起動と設定 |
| Q2 | step2_2 セキュリティグループの設定 |
| Q3, Q5, Q7 | step2_3 S3バケットの作成と管理 |
| Q4, Q8 | step2_1 EC2インスタンスの起動と設定 |
| Q5 | step2_4 RDSの構築とバックアップ |
| Q6 | step2_5 演習：3層アーキテクチャ |

---

*推定所要時間: 30分*

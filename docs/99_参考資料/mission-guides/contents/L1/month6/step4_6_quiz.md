# チェックポイント：VPCネットワークを設計しよう

## メタ情報

```yaml
mission: "クラウドの頂を制覇しよう"
step: 4
subStep: 6
title: "チェックポイント"
itemType: QUIZ
estimatedMinutes: 30
noiseLevel: MINIMAL
roadmap:
  skill: "AWS"
  category: "クラウド"
  target_level: "L1"
passingScore: 80
```

---

## クイズの説明

Step 4 で学んだ VPC ネットワークに関する理解度をチェックします。

- 全7問
- 合格ライン: 80%（6問正解）

---

## 問題

### Q1. VPC の CIDR ブロック 10.0.0.0/16 で使用可能な IP アドレスの数は約何個ですか？

- A) 256
- B) 4,096
- C) 65,536
- D) 1,048,576

<details>
<summary>解答と解説</summary>

**正解: C**

/16 は上位16ビットがネットワーク部で、残り16ビット（2^16 = 65,536）がホスト部です。ただし、AWS では各サブネットで5つの IP アドレスが予約されるため、実際に使用可能な数は若干少なくなります。

</details>

---

### Q2. パブリックサブネットとプライベートサブネットの違いを決定づける要素はどれですか？

- A) サブネットの CIDR ブロックのサイズ
- B) ルートテーブルにインターネットゲートウェイへのルートがあるかどうか
- C) サブネットが配置されている AZ
- D) サブネットに関連付けられたセキュリティグループ

<details>
<summary>解答と解説</summary>

**正解: B**

パブリックサブネットは、ルートテーブルにインターネットゲートウェイ（IGW）への ルート（0.0.0.0/0 → igw-xxx）を持つサブネットです。この ルートがなければプライベートサブネットです。CIDR のサイズや AZ は関係ありません。

</details>

---

### Q3. NAT ゲートウェイの説明として正しいものはどれですか？

- A) プライベートサブネットに配置して、インターネットからのインバウンド通信を許可する
- B) パブリックサブネットに配置して、プライベートサブネットからのアウトバウンド通信を中継する
- C) VPC 間の通信を中継する
- D) IGW の代替として使用する

<details>
<summary>解答と解説</summary>

**正解: B**

NAT ゲートウェイはパブリックサブネットに配置し、プライベートサブネットからのアウトバウンド（外向き）通信をインターネットに中継します。インターネットからの直接のインバウンド通信はブロックされます。パッチのダウンロードなど、プライベートサブネットからインターネットへの通信が必要な場合に使用します。

</details>

---

### Q4. VPC ピアリングの制約として正しいものはどれですか？

- A) 同一リージョン内の VPC 間でのみ利用可能
- B) 推移的なピアリング（A↔B, B↔C で A→C）が可能
- C) 接続する VPC の CIDR ブロックが重複してはならない
- D) 1つの VPC は最大2つの VPC としかピアリングできない

<details>
<summary>解答と解説</summary>

**正解: C**

VPC ピアリングでは、接続する2つの VPC の CIDR ブロックが重複してはなりません（例: 両方とも 10.0.0.0/16 は不可）。VPC ピアリングはリージョンをまたいで利用可能であり、推移的なピアリングは不可です。1つの VPC は多数の VPC とピアリング可能です。

</details>

---

### Q5. S3 用の VPC ゲートウェイエンドポイントを使用するメリットとして正しいものはどれですか？

- A) S3 へのアクセスが高速になる
- B) NAT ゲートウェイを経由せずにプライベート接続でき、コスト削減になる
- C) S3 のストレージ料金が割引される
- D) S3 バケットのセキュリティが自動的に強化される

<details>
<summary>解答と解説</summary>

**正解: B**

S3 用のゲートウェイエンドポイントを使用すると、プライベートサブネットからの S3 アクセスが NAT ゲートウェイを経由せずにプライベート接続で行われます。ゲートウェイエンドポイント自体は無料で、NAT ゲートウェイのデータ転送料金を削減できます。加えて、トラフィックがインターネットを経由しないためセキュリティも向上します。

</details>

---

### Q6. マルチAZ 環境で NAT ゲートウェイの高可用性を確保するために推奨される構成はどれですか？

- A) 1つの AZ に NAT ゲートウェイを配置し、全 AZ のプライベートサブネットから使用
- B) 各 AZ に NAT ゲートウェイを配置し、同じ AZ のプライベートサブネットから使用
- C) NAT インスタンス（EC2）を使用
- D) IGW を代わりに使用

<details>
<summary>解答と解説</summary>

**正解: B**

各 AZ に NAT ゲートウェイを配置し、同じ AZ 内のプライベートサブネットのルートテーブルから対応する NAT ゲートウェイを参照するのが推奨構成です。1つの AZ にのみ配置した場合、その AZ に障害が発生すると全 AZ のアウトバウンド通信が停止します。

</details>

---

### Q7. ネットワーク ACL とセキュリティグループの違いとして正しいものはどれですか？

- A) セキュリティグループはステートレスで、ネットワーク ACL はステートフルである
- B) ネットワーク ACL はサブネット単位で適用され、拒否ルールも設定できる
- C) セキュリティグループはサブネット単位で適用される
- D) ネットワーク ACL はインスタンス単位で適用される

<details>
<summary>解答と解説</summary>

**正解: B**

ネットワーク ACL はサブネット単位で適用され、許可ルールと拒否ルールの両方を設定できるステートレスなファイアウォールです。セキュリティグループはインスタンス単位で適用され、許可ルールのみ設定できるステートフルなファイアウォールです。

</details>

---

## 結果

### 6問以上正解の場合

**合格です。おめでとうございます。**

Step 4「VPCネットワークを設計しよう」を完了しました。
次は Step 5「マルチクラウドの視野を広げよう」に進みましょう。

### 5問以下の場合

**もう少し復習しましょう。**

| 問題 | 復習セクション |
|------|---------------|
| Q1, Q2 | step4_1 VPCの基本概念 |
| Q2 | step4_2 サブネットとルーティング |
| Q3, Q6 | step4_3 NATゲートウェイとインターネットゲートウェイ |
| Q4, Q5 | step4_4 VPCピアリングとエンドポイント |
| Q7 | step4_2 サブネットとルーティング |

---

*推定所要時間: 30分*

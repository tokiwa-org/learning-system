# 理解度チェック：TCP/IPの旅に出よう

## メタ情報

```yaml
mission: "データの守護者を目指そう"
step: 4
subStep: 6
title: "理解度チェック"
itemType: QUIZ
estimatedMinutes: 15
noiseLevel: MINIMAL
roadmap:
  skill: "ネットワーク"
  category: "IT基本"
  target_level: "L1"
passingScore: 80
```

---

## クイズの説明

Step 4で学んだTCP/IP、ポート、ファイアウォールの理解度をチェックします。

- 全8問
- 合格ライン: 80%（7問正解）
- 不合格の場合は復習してから再挑戦してください

---

## 問題

### Q1. TCPの3ウェイハンドシェイクの正しい順序は？

- A) ACK → SYN → SYN-ACK
- B) SYN → ACK → SYN-ACK
- C) SYN → SYN-ACK → ACK
- D) SYN-ACK → SYN → ACK

<details>
<summary>答えを見る</summary>

**正解: C**

3ウェイハンドシェイクは、クライアントがSYNを送信 → サーバーがSYN-ACKで応答 → クライアントがACKで確認、の3ステップで接続を確立します。

</details>

---

### Q2. UDPの特徴として正しいものはどれですか？

- A) 再送制御がある
- B) コネクションレスで高速
- C) データの順序を保証する
- D) ヘッダサイズが20バイト以上

<details>
<summary>答えを見る</summary>

**正解: B**

UDPはコネクションレス型で、接続確立のオーバーヘッドがなく高速です。再送制御なし、順序保証なし、ヘッダは8バイトとTCPよりシンプルです。

</details>

---

### Q3. MySQLのデフォルトポート番号は？

- A) 22
- B) 80
- C) 3306
- D) 5432

<details>
<summary>答えを見る</summary>

**正解: C**

3306がMySQLのデフォルトポートです。ちなみに22はSSH、80はHTTP、5432はPostgreSQLです。

</details>

---

### Q4. 「ソケット」の正しい説明は？

- A) ネットワークケーブルの接続口
- B) IPアドレスとポート番号の組み合わせ
- C) ファイアウォールの設定ファイル
- D) パケットの格納場所

<details>
<summary>答えを見る</summary>

**正解: B**

ソケットはIPアドレスとポート番号の組み合わせで、通信の端点を表します。例: 192.168.1.100:3306。TCP接続は、クライアントとサーバーのソケットのペアで識別されます。

</details>

---

### Q5. ss -tln コマンドの出力で 0.0.0.0:3306 と 127.0.0.1:3306 の違いは？

- A) どちらも同じ意味
- B) 0.0.0.0 は外部からアクセス可能、127.0.0.1 はローカルのみ
- C) 0.0.0.0 はIPv4、127.0.0.1 はIPv6
- D) 0.0.0.0 はUDP、127.0.0.1 はTCP

<details>
<summary>答えを見る</summary>

**正解: B**

0.0.0.0はすべてのネットワークインターフェースでLISTENするため外部からアクセス可能です。127.0.0.1はループバックアドレスで、自分自身からのアクセスのみ受け付けます。

</details>

---

### Q6. ファイアウォールの「最小権限の原則」として正しいものは？

- A) すべてのポートを開放し、問題があれば閉じる
- B) すべてを拒否し、必要なものだけを許可する
- C) 偶数ポートだけを許可する
- D) 外部からの通信をすべて許可し、内部からの通信を制限する

<details>
<summary>答えを見る</summary>

**正解: B**

最小権限の原則（Principle of Least Privilege）では、デフォルトですべての通信を拒否し、必要最小限のアクセスのみを許可します。これがセキュリティの基本です。

</details>

---

### Q7. tcpdump の出力で Flags [S] は何を意味しますか？

- A) データ送信
- B) SYNフラグ（接続要求）
- C) 接続リセット
- D) 切断要求

<details>
<summary>答えを見る</summary>

**正解: B**

Flags [S] はSYNフラグで、TCP接続の開始を要求するパケットです。[S.] はSYN-ACK、[.] はACK、[F] はFIN（切断要求）、[R] はRST（リセット）を表します。

</details>

---

### Q8. DNSの問い合わせに通常使われるプロトコルとポートは？

- A) TCP / ポート80
- B) UDP / ポート53
- C) TCP / ポート53
- D) UDP / ポート80

<details>
<summary>答えを見る</summary>

**正解: B**

DNSの問い合わせは通常UDP/ポート53で行われます。小さなデータを高速にやりとりするためUDPが適しています。ただし、応答が大きい場合（ゾーン転送等）はTCP/ポート53にフォールバックします。

</details>

---

## 結果

### 7問以上正解の場合

**合格です！**

Step 4「TCP/IPの旅に出よう」を完了しました。
次はStep 5「ネットワーク障害を解決しよう」に進みましょう。

### 6問以下の場合

**もう少し復習しましょう**

| 問題 | 復習セクション |
|------|---------------|
| Q1 | step4_1 TCPの仕組み |
| Q2 | step4_2 TCPとUDP |
| Q3-Q5 | step4_3 ポートとソケット |
| Q6 | step4_4 ファイアウォール |
| Q7 | step4_5 パケットキャプチャ |
| Q8 | step4_2 / step4_3 |

---

## Step 4 完了！

### 学んだこと

- TCPの3ウェイハンドシェイクと接続状態
- TCPとUDPの違いと使い分け
- ポート番号とソケットの概念
- ファイアウォール（ufw, セキュリティグループ）
- パケットキャプチャ（tcpdump）の基本

### 次のステップ

**Step 5: ネットワーク障害を解決しよう（6時間）**

学んだ知識を総動員して、実際のネットワーク障害をトラブルシューティングします。

---

*推定所要時間: 15分*

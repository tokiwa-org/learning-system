# チェックポイント：ネットワーク障害を解決しよう

## メタ情報

```yaml
mission: "データの守護者を目指そう"
step: 5
subStep: 6
title: "チェックポイント"
itemType: QUIZ
estimatedMinutes: 30
noiseLevel: MINIMAL
roadmap:
  skill: "ネットワーク"
  category: "IT基本"
  target_level: "L1"
passingScore: 80
```

---

## クイズの説明

Step 5で学んだネットワーク障害対応の理解度をチェックします。

- 全8問
- 合格ライン: 80%（7問正解）
- 不合格の場合は復習してから再挑戦してください

---

## 問題

### Q1. ネットワーク障害のトラブルシューティングで推奨されるアプローチは？

- A) アプリケーション層から下に向かって確認する（トップダウン）
- B) 物理層からアプリケーション層に向かって確認する（ボトムアップ）
- C) ランダムにいろいろ試す
- D) すべてのサーバーを再起動する

<details>
<summary>答えを見る</summary>

**正解: B**

OSI参照モデルの下位層（物理層）から上位層（アプリケーション層）に向かって順番に確認する「ボトムアップアプローチ」が推奨されます。上位層は下位層に依存しているため、下位層の問題を先に排除します。

</details>

---

### Q2. dig @8.8.8.8 example.com の @ の意味は？

- A) メールアドレスを指定している
- B) 問い合わせ先のDNSサーバーを指定している
- C) レコードタイプを指定している
- D) タイムアウト時間を指定している

<details>
<summary>答えを見る</summary>

**正解: B**

`@8.8.8.8` は、DNS問い合わせ先のサーバーを Google Public DNS（8.8.8.8）に指定しています。ローカルDNSサーバーに問題がある場合、別のDNSサーバーで試すことで問題を切り分けられます。

</details>

---

### Q3. DNSのTTL（Time To Live）が300の場合、正しい説明は？

- A) DNSレコードが300回問い合わせ可能
- B) DNSレコードが300秒間キャッシュされる
- C) DNSサーバーが300個まで応答を返す
- D) DNS問い合わせが300msでタイムアウトする

<details>
<summary>答えを見る</summary>

**正解: B**

TTL=300は、DNSレコードが300秒（5分間）キャッシュに保持されることを意味します。この間は同じ問い合わせに対してキャッシュから応答が返され、TTL経過後に再度DNSサーバーに問い合わせます。

</details>

---

### Q4. SSL証明書チェーンの正しい信頼の順序は？

- A) サーバー証明書 → ルートCA → 中間CA
- B) ルートCA → 中間CA → サーバー証明書
- C) 中間CA → サーバー証明書 → ルートCA
- D) サーバー証明書 → 中間CA → ルートCA

<details>
<summary>答えを見る</summary>

**正解: B（または D、検証の方向として）**

証明書チェーンは、ルートCA → 中間CA → サーバー証明書の順で署名されています。検証時はサーバー証明書から中間CA、ルートCAへとチェーンをたどります。ルートCAはOSやブラウザに信頼済みとして組み込まれています。

</details>

---

### Q5. nginx で 502 Bad Gateway エラーが発生する最も一般的な原因は？

- A) nginx の設定ファイルに構文エラーがある
- B) クライアントのリクエストが大きすぎる
- C) バックエンドのアプリケーションサーバーが応答しない
- D) SSL証明書が期限切れ

<details>
<summary>答えを見る</summary>

**正解: C**

502 Bad Gateway は、リバースプロキシ（nginx）がバックエンドのサーバーから有効な応答を受け取れなかった場合に発生します。最も一般的な原因は、バックエンドのアプリケーションサーバーが停止しているか、応答できない状態にあることです。

</details>

---

### Q6. リバースプロキシとフォワードプロキシの違いとして正しいものは？

- A) リバースプロキシはクライアント側、フォワードプロキシはサーバー側に配置
- B) リバースプロキシはサーバー側、フォワードプロキシはクライアント側に配置
- C) どちらも同じもの
- D) リバースプロキシはHTTP専用、フォワードプロキシはHTTPS専用

<details>
<summary>答えを見る</summary>

**正解: B**

リバースプロキシはサーバー側に配置し、クライアントからのリクエストを受けてバックエンドに転送します。フォワードプロキシはクライアント側に配置し、クライアントの代わりに外部にリクエストを送信します。

</details>

---

### Q7. ロードバランサーの「ラウンドロビン」方式の説明として正しいものは？

- A) 最も負荷の低いサーバーにリクエストを送る
- B) クライアントIPに基づいて特定のサーバーに固定する
- C) 各サーバーに順番にリクエストを振り分ける
- D) ランダムにサーバーを選ぶ

<details>
<summary>答えを見る</summary>

**正解: C**

ラウンドロビン方式は、リクエストを各サーバーに順番（1→2→3→1→2→3...）に振り分けます。最もシンプルな方式で、すべてのサーバーが同じ性能の場合に適しています。

</details>

---

### Q8. ping は通るが特定のTCPポートに接続できない場合、最も考えられる原因は？

- A) ネットワークケーブルが外れている
- B) IPアドレスが間違っている
- C) ファイアウォールで該当ポートがブロックされている
- D) DNSの設定ミス

<details>
<summary>答えを見る</summary>

**正解: C**

ping（ICMP）は通るのでL3（ネットワーク層）は正常です。特定のTCPポートだけ接続できない場合、ファイアウォールによるポートのブロック、またはサービスが該当ポートでLISTENしていないことが考えられます。

</details>

---

## 結果

### 7問以上正解の場合

**合格です！**

Step 5「ネットワーク障害を解決しよう」を完了しました。
次はStep 6「最終試験：データ復旧ミッション」に進みましょう。

### 6問以下の場合

**もう少し復習しましょう**

| 問題 | 復習セクション |
|------|---------------|
| Q1 | step5_1 トラブルシューティングの体系的アプローチ |
| Q2-Q3 | step5_2 DNS障害を解決しよう |
| Q4 | step5_3 SSL/TLS証明書を理解しよう |
| Q5-Q6 | step5_4 プロキシとロードバランサー |
| Q7 | step5_4 ロードバランサー |
| Q8 | step5_1 / step5_5 障害対応 |

---

## Step 5 完了！

### 学んだこと

- トラブルシューティングのボトムアップアプローチ
- DNS障害の診断と解決（dig, TTL, /etc/resolv.conf）
- SSL/TLS証明書の仕組みと障害対応
- プロキシ（フォワード/リバース）とnginxの基本
- ロードバランサーの仕組み

### 次のステップ

**Step 6: 最終試験：データ復旧ミッション（2時間）**

これまでの全スキルを総動員する最終試験です。

---

*推定所要時間: 30分*

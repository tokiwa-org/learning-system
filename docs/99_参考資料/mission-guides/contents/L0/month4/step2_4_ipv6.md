# IPv6と未来のネットワーク

## メタ情報

```yaml
mission: "ネットワークの仕組みを解明しよう"
step: 2
subStep: 4
title: "IPv6と未来のネットワーク"
itemType: LESSON
estimatedMinutes: 30
noiseLevel: MINIMAL
roadmap:
  skill: "ネットワーク"
  category: "IT基本"
  target_level: "L0"
```

---

## ストーリー

> 「先輩、IPv4アドレスが足りなくなってるって聞いたんですが、どうするんですか？」
>
> 「NATでしのいでいる部分もあるけど、根本的な解決策がIPv6なんだ」
>
> 「IPv6？」
>
> 「IPv4の後継バージョンだよ。アドレスの数がケタ違いに多いんだ」

---

## IPv6が必要な理由

### IPv4の限界

```
IPv4アドレス数: 約43億個（2^32）
世界の人口:    約80億人
IoT機器数:     数百億台（増加中）
```

1人1台のスマホだけでも足りない。さらにスマート家電、自動車、センサーなど、インターネットに接続する機器は爆発的に増えています。

### IPv6の解決策

```
IPv6アドレス数: 約340澗個（2^128）
             = 340,282,366,920,938,463,463,374,607,431,768,211,456個
```

これは地球上の砂粒すべてにIPアドレスを割り当てても余る数です。

---

## IPv6アドレスの形式

### 基本形式

```
2001:0db8:85a3:0000:0000:8a2e:0370:7334
```

- **8グループ** をコロン（:）で区切る
- 各グループは **16進数4桁**（0000〜ffff）
- 合計 **128ビット**

### IPv4との比較

| 項目 | IPv4 | IPv6 |
|------|------|------|
| ビット数 | 32ビット | 128ビット |
| 表記 | 10進数（192.168.1.1） | 16進数（2001:db8::1） |
| アドレス数 | 約43億 | 約340澗 |
| 区切り | ドット（.） | コロン（:） |

### 省略ルール

IPv6は長いので、省略ルールがあります。

```
元: 2001:0db8:0000:0000:0000:0000:0000:0001
↓ 先頭の0を省略
    2001:db8:0:0:0:0:0:1
↓ 連続する0のグループを :: で省略（1回だけ）
    2001:db8::1
```

### よく見るIPv6アドレス

| アドレス | 意味 |
|---------|------|
| `::1` | ループバック（IPv4の127.0.0.1に相当） |
| `fe80::` で始まる | リンクローカルアドレス（LAN内のみ） |
| `2001:` で始まる | グローバルユニキャストアドレス（インターネット用） |

---

## IPv6の特徴

### NATが不要

IPv6はアドレスが十分にあるため、すべての機器にグローバルアドレスを割り当てられます。

```
IPv4: [PC] → NAT → [インターネット]  （アドレスを共有）
IPv6: [PC] → [インターネット]         （直接接続）
```

### 自動設定が簡単

IPv6にはアドレスの自動設定機能（SLAAC）が組み込まれています。DHCPサーバーなしでもアドレスが自動的に設定されます。

### セキュリティの向上

IPv6ではIPsec（暗号化通信）が標準サポートされています。

---

## IPv6の普及状況

### 現在の普及率

- Googleへのアクセスの約40%以上がIPv6
- 日本の普及率は約50%
- モバイル回線はIPv6対応が進んでいる

### IPv4とIPv6の共存

現在は両方が同時に使われている移行期です。

```
[あなたのPC]
  ├── IPv4: 192.168.1.10
  └── IPv6: 2001:db8::10

Webサイトにアクセスするとき:
  → IPv6が使えるならIPv6で接続
  → IPv6が使えなければIPv4で接続
```

この両方のアドレスを持つことを **デュアルスタック** と言います。

---

## IPv6の確認方法

### Linux / Mac

```bash
ip -6 addr show         # IPv6アドレスを表示（Linux）
ifconfig | grep inet6    # IPv6アドレスを表示（Mac）
```

### 接続テスト

```bash
ping6 ::1               # IPv6のループバックにping（Linux）
ping -6 ::1             # IPv6のループバックにping（一部のシステム）
```

---

## 今の段階で覚えておくこと

IPv6の詳細はL1以降で深く学びます。今は以下の3点だけ覚えておけばOKです。

1. **IPv6はIPv4の後継** で、アドレス数がほぼ無限
2. **形式が違う**：コロン区切りの16進数8グループ
3. **現在は移行期** で、IPv4とIPv6が共存している

---

## まとめ

| ポイント | 内容 |
|----------|------|
| IPv6が必要な理由 | IPv4アドレス（約43億個）の枯渇 |
| IPv6の形式 | 16進数8グループ、128ビット |
| アドレス数 | 約340澗個（事実上無限） |
| 普及状況 | IPv4とIPv6が共存する移行期 |

### チェックリスト
- [ ] IPv6が必要な理由を説明できる
- [ ] IPv6アドレスの形式を知っている
- [ ] IPv4とIPv6の違いを簡単に説明できる
- [ ] 現在がIPv4/IPv6の共存期であると理解した

---

## 次のステップへ

IPv4とIPv6の基本が分かりましたね。

次は演習です。実際にコマンドを使って、自分のIPアドレスを調べたり、他のコンピュータと通信できるか確認してみましょう。

---

*推定読了時間: 30分*
